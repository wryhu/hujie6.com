<!--首页,继承导航栏-->
{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
    首页
{% endblock %}

{% block header_extends %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/chat.css' %}">
    <link rel="stylesheet" href="{% static 'font_Icon/iconfont.css' %}">
    <script src="/static/js/home.js"></script>
    <script src="//cdn.hcharts.cn/highcharts/highcharts.js"></script>
    <script src="/static/js/echarts.js"></script>
    <script src="/static/js/china.js"></script>
    <script src="/static/js/snowfall.js"></script>
{% endblock %}

{% block content %}
    <!--轮播幻灯片-->
    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
        <li data-target="#carousel-example-generic" data-slide-to="1"></li>
        <li data-target="#carousel-example-generic" data-slide-to="2"></li>
        <li data-target="#carousel-example-generic" data-slide-to="3"></li>
        <li data-target="#carousel-example-generic" data-slide-to="4"></li>
      </ol>

      <!-- Wrapper for slides -->
      <div class="carousel-inner" role="listbox">

        <div class="item active">
          <img src="/static/boot.jpg">

        </div>

        <div class="item">
          <img src="/static/code.jpg">

        </div>

        <div class="item">
          <img src="/static/michael.jpg">

        </div>

        <div class="item">
          <img src="/static/anime.jpg">

        </div>
        <div class="item">
          <img src="/static/image/yourname.jpg">

        </div>
      </div>
      <!-- Controls -->
      <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
        <span id="haha" class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <!--巨幕-->
    <div class="jumbotron">
        <div class="container">
            <h1>Hello, world!</h1>
            <p>&ensp;欢迎访问我的网站，当前在线人数: <span id="online" style="display:none"></span></p>
        </div>
    </div>

    <div class="container">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>网站相关数据统计</span>
                    </span>
                </h2>
            </div>
        </div>
        <div id="chart_set" class="row">
            <div class="col-md-5 col-md-offset-1">
                <!-- 图表容器 DOM -->
                <div id="container"></div>
            </div>
            <div class="col-md-4 col-md-offset-1">
                <div>
                  <!-- Nav tabs -->
                  <ul class="nav nav-tabs" role="tablist">
                      <li role="presentation" class="active"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">七天热门阅读</a></li>
                    <li role="presentation" ><a href="#home" aria-controls="home" role="tab" data-toggle="tab">今日热门阅读</a></li>
                    <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">昨日热门阅读</a></li>

                  </ul>
                  <!-- Tab panes -->
                  <div class="tab-content">
                    <div role="tabpanel" class="tab-pane fade" id="home">
                        {% for hot_data in get_today_hot_data %}
                            <li><a href="{% url 'blog_detail' hot_data.content_object.pk %}">{{ hot_data.content_object.title }}</a> ({{ hot_data.read_num }})</li>
                        {% empty %}
                            <li>今日暂时没有热门博客</li>
                        {% endfor %}
                    </div>
                    <div role="tabpanel" class="tab-pane fade" id="profile">
                        {% for hot_data in get_yesterday_hot_data %}
                            <li><a href="{% url 'blog_detail' hot_data.content_object.pk %}">{{ hot_data.content_object.title }}</a> ({{ hot_data.read_num }})</li>
                        {% empty %}
                            <li>昨日暂时没有热门博客</li>
                        {% endfor %}
                        </div>
                    <div role="tabpanel" class="tab-pane fade active in" id="messages">
                        {% for hot_data in get_7_days_hot_blog %}
                            <li><a href="{% url 'blog_detail' hot_data.id %}">{{ hot_data.title }}</a> ({{ hot_data.read_num_sum }})</li>
                        {% empty %}
                            <li>前七天暂时没有热门博客</li>
                        {% endfor %}
                    </div>
                  </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-5 col-md-offset-1">
                <div id="container2"></div>
            </div>
            <div class="col-md-5 col-md-offset-1">
                <div id="uv_map" style="width:100%;height:400px"></div>
            </div>
        </div>
        <div class="row">
          <div class="col-md-10 col-md-offset-1">
            <table class="table">
              <caption>今日访客</caption>
              <thead>
                <tr>
                  <th>#</th>
                  <th>访问时间</th>
                  <th>地域</th>
                  <th>入口页面</th>
                  <th>访问ip</th>
                  <th>访问时长</th>
                  <th>访问页数</th>
                </tr>
              </thead>
              <tbody>
                {% for i in latest %}
                <tr>
                  <th scope="row">{{ forloop.counter }}</th>
                  {% for x in i %}
                      <td>{{ x }}</td>
                  {% endfor %}
                </tr>
                {% empty %}
                    <th>暂无</th>
                    <th>暂无</th>
                    <th>暂无</th>
                    <th>暂无</th>
                    <th>暂无</th>
                    <th>暂无</th>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>おすすめそのいち</span>
                    </span>
                </h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 col-xs-12 bkg">
                <!--固定背景图和上面的文本-->
                <div id="bg1">
                    <div class="landing-text">
                        <div id="hyouka_text">
                            <img src="/static/image/hyouka.png">
                            <div class="hyouka_lists">
                                <img class="hyouka_list" src="/static/image/hyouka4.jpg">
                                <img class="hyouka_list" src="/static/image/hyouka2.jpg">
                                <img class="hyouka_list" src="/static/image/hyouka3.jpg">
                                <img class="hyouka_list" src="/static/image/hyouka1.jpg">
                                <img class="hyouka_list" src="/static/image/hyouka7.jpg">
                                <img class="hyouka_list" src="/static/image/hyouka5.jpg">
                                <img class="hyouka_list" src="/static/image/hyouka6.jpg">
                            </div>
                            <div id="topCatch">
                                <p id="topCatch-01"></p>
                                <p id="topCatch-02"></p>
                                <p id="topCatch-03"></p>
                            </div>
                            <div id="topOnair">
                                <p id="topOnair-01"></p>
                            </div>
                            <div id="snow_player" class="fa fa-play"></div>
                            <div id="hyouka_arrow" class="fa fa-heart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>profile</span>
                    </span>
                </h2>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-3">
                <div class="thumbnail">
                  <img src="static/image/coding.jpg">
                  <div class="caption">
                    <h3>热爱编程</h3>
                    <p>&emsp;&emsp;好奇心的驱使下开始学习编程，才发现了它的意义。虽然刚接触编程不久，
                        但发现自己对其是如此狂热，几乎所有的业余时间也都被用来钻研技术，来提高自己的编程能力。
                        通过编程进行着自我表达与创作，这种感受带给了我极大的自由度，而我也从中感受到了前所未有的喜悦与乐趣。
                        如果你也对编程感兴趣的话现在就马上行动吧。</p>
                    <p><a href="https://baike.baidu.com/item/%E7%BC%96%E7%A8%8B/139828" class="btn btn-info">了解</a>
                        <a href="http://www.runoob.com/" class="btn btn-warning">推荐</a></p>
                  </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-3">
                <div class="thumbnail" style="margin-top:50px">
                  <img src="static/image/sing.jpg">
                  <div class="caption">
                    <h3>Enioy music</h3>
                    <p>&emsp;&emsp;从小就喜欢听歌，周杰伦，林俊杰，王力宏，真的人才辈出。
                        现在中文歌听的少了。所以转战国外，欧美的歌手像我霉，山东天后，
                        水果姐，Sia，火星哥，抗韩英雄马老五，共和，梦龙，黄老板等都是我的菜
                        。日语歌的话像中岛美嘉，德永英明等老牌歌手比较合
                        我胃口。对了，有兴趣的可以搜一下中岛美雪，她的歌你肯定听过。</p>
                    <p><a href="https://www.bilibili.com/video/av2855285" class="btn btn-info">了解</a>
                        <a href="https://www.bilibili.com/video/av16816912" class="btn btn-warning">推荐</a></p>
                  </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-3">
                <div class="thumbnail">
                  <img src="static/image/jump.jpg">
                  <div class="caption">
                    <h3>アニメ大好き</h3>
                    <p>&emsp;&emsp;有些剧情和画面是电视剧电影等无法实现的，再加上制作成本和时间等因素，动漫是很好的表现形式
                        ，能够直观的展现作者想要表达的创意。最近几年猎奇向的动漫多了不少，
                        我也是来者不拒，不过现在日漫停滞不前大家有目共睹，主要是各种类型的动
                        漫都写的差不多了，再想创新就会更难了，期待更多的好作品出现吧。</p>
                    <p><a href="https://www.bilibili.com/video/av2724281" class="btn btn-info">了解</a>
                        <a href="https://www.bilibili.com/video/av3571686" class="btn btn-warning">推荐</a></p>
                  </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-3">
                <div class="thumbnail" style="margin-top:50px">
                  <img src="static/image/movie.jpeg">
                  <div class="caption">
                    <h3>电影人生</h3>
                    <p>&emsp;&emsp;空闲的时候谁都会想到看场电影，我也一样，比较钟意剧情片和传记。
                        电影在一定程度上反映了社会和生活中真实的一面，人们能在电影中找到一部分生活中真实的自己的影子，
                        你能从中学到一些人生阅历。
                        电影跟书籍一样，启迪心灵，开阔视野，了解更多不同人的不同想法，
                        好的思想可以让你立刻去做，好的哲理甚至可以影响人生。
                    </p>
                    <p><a href="https://baike.baidu.com/item/%E7%94%B5%E5%BD%B1/31689" class="btn btn-info">了解</a>
                        <a href="https://movie.douban.com/subject/1292064/" class="btn btn-warning">推荐</a></p>
                  </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>おすすめそのに</span>
                    </span>
                </h2>
            </div>
        </div>
        <div class="row">
            <div class="col-12 bkg">
                <div class="y-container">
                    <div class="y1">
                        <img src="/static/image/tokyoghoul.jpg">
                    </div>
                    <div class="y2">
                        <img src="/static/image/Tokyoghoul.jpg">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--展示一下爬虫-->
    <div id="img_crwal" class="container">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>随机抓取网络壁纸</span>
                    </span>
                </h2>
            </div>
        </div>
        <div class="row welcome text-centet">
            <div class="col-md-7 col-xs-12">
                <div class="line">
                    <img src="/static/image/lineR.png" width="30" height="330">
                </div>
                <div class="line_center">
                    <img id="bgz-1">
                    <img id="bgz-2">
                </div>
                <div class="line">
                    <img src="/static/image/lineR.png" width="30" height="330">
                </div>
            </div>
            <div class="col-md-5 col-xs-12">
                <div class="change_image">
                    <div id="change_img" class="box foo"><div>抓取</div></div>
                </div>
            </div>
        </div>
    </div>
    <!--封面展示-->
    <div class="container-fluid">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>封面原图展示</span>
                    </span>
                </h2>
            </div>
        </div>
        <div class="row">
            <div id="main_bg1" class="col-md-12 col-xs-12 main_bg"></div>
        </div>
        <div class="row">
            <div id="main_bg2" class="col-md-12 col-xs-12 main_bg"></div>
        </div>
        <div class="row">
            <div id="main_bg3" class="col-md-12 col-xs-12 main_bg"></div>
        </div>
    </div>

    <div class="container">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>翻译</span>
                    </span>
                </h2>
            </div>
        </div>
        <div class="row welcome text-centet">
            <div class="col-md-6 col-xs-12">
                <div class="dropdown">
                  <button class="btn btn-danger dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" data-lan1="AUTO" data-lan2="AUTO">
                    <span id="tran_type_text">自动检测语言</span>
                    <span class="fa fa-caret-down"></span>
                  </button>
                  <button id="clear_tran" class="btn btn-primary" type="button" style="float:right">清空内容</button>
                  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                    <li class="lan" data-lan1="AUTO" data-lan2="AUTO"><a href="javascript:;" style="margin-right:100px">自动检测语言</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="en"><a href="javascript:;">中文 &nbsp;» &nbsp;英语</a></li>
                    <li class="lan" data-lan1="en" data-lan2="zh-CHS"><a href="javascript:;">英语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="ja"><a href="javascript:;">中文 &nbsp;» &nbsp;日语</a></li>
                    <li class="lan" data-lan1="ja" data-lan2="zh-CHS"><a href="javascript:;">日语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="ko"><a href="javascript:;">中文 &nbsp;» &nbsp;韩语</a></li>
                    <li class="lan" data-lan1="ko" data-lan2="zh-CHS"><a href="javascript:;">韩语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="fr"><a href="javascript:;">中文 &nbsp;» &nbsp;法语</a></li>
                    <li class="lan" data-lan1="fr" data-lan2="zh-CHS"><a href="javascript:;">法语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="ru"><a href="javascript:;">中文 &nbsp;» &nbsp;俄语</a></li>
                    <li class="lan" data-lan1="ru" data-lan2="zh-CHS"><a href="javascript:;">俄语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="de"><a href="javascript:;">中文 &nbsp;» &nbsp;德语</a></li>
                    <li class="lan" data-lan1="de" data-lan2="zh-CHS"><a href="javascript:;">德语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="vi"><a href="javascript:;">中文 &nbsp;» &nbsp;越南语</a></li>
                    <li class="lan" data-lan1="vi" data-lan2="zh-CHS"><a href="javascript:;">越南语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="id"><a href="javascript:;">中文 &nbsp;» &nbsp;印尼语</a></li>
                    <li class="lan" data-lan1="id" data-lan2="zh-CHS"><a href="javascript:;">印尼语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="es"><a href="javascript:;">中文 &nbsp;» &nbsp;西班牙语</a></li>
                    <li class="lan" data-lan1="es" data-lan2="zh-CHS"><a href="javascript:;">西班牙语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="pt"><a href="javascript:;">中文 &nbsp;» &nbsp;葡萄牙语</a></li>
                    <li class="lan" data-lan1="pt" data-lan2="zh-CHS"><a href="javascript:;">葡萄牙语 &nbsp;» &nbsp;中文</a></li>
                    <li class="lan" data-lan1="zh-CHS" data-lan2="ar"><a href="javascript:;">中文 &nbsp;» &nbsp;阿拉伯语</a></li>
                    <li class="lan" data-lan1="ar" data-lan2="zh-CHS"><a href="javascript:;">阿拉伯语 &nbsp;» &nbsp;中文</a></li>
                  </ul>
                </div>
                <br>
                <textarea id="tran_area" class="tran form-control" rows="10" placeholder="请输入需要翻译的文字内容~"></textarea>
            </div>
            <div class="col-md-6 col-xs-12">
                <textarea id="show_tran" class="tran form-control" rows="10" readonly="readonly"></textarea>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>おすすめそのさん</span>
                    </span>
                </h2>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div id="fate">
                    <div class="content">
                        <img src="/static/image/logo_staynight.png">
                    </div>
                    <div class="cover"></div>
                    <div class="videoContainer">
                        <video src="/static/video/fate.mp4" muted="muted" width="100%" height="100%" autoplay="autoplay" loop="loop">
                            您的浏览器不支持此视频
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row welcome text-centet">
            <div class="col-12">
                <h2 class="same">
                    <span class="frame_bg">
                        <span>Learning</span>
                    </span>
                </h2>
            </div>
        </div>
        <div class="row" style="margin-bottom:25px;">
          <div class="aitem col-md-4 clo-xs-12">
            <figure class="learn_hover">

              <div class="icon-overlay icn-link">
                <a href="https://dormousehole.readthedocs.io/en/latest/"><img src="/static/image/flask.png"
                                                       alt="flask logo"></a>
              </div><!-- /.icon-overlay -->

              <figcaption class="bordered no-top-border">
                <div class="info">
                  <h4><a href="https://dormousehole.readthedocs.io/en/latest/">Flask</a></h4>
                  <p></p>
                </div><!-- /.info -->
              </figcaption>

            </figure>
          </div>

          <div class="aitem col-md-4 clo-xs-12">
            <figure class="learn_hover">

              <div class="icon-overlay icn-link">
                <a href="https://pillow.readthedocs.io/en/latest/"><img src="/static/image/pillow.png"
                                                       alt="pillow logo"></a>
              </div><!-- /.icon-overlay -->

              <figcaption class="bordered no-top-border">
                <div class="info">
                  <h4><a href="https://pillow.readthedocs.io/en/latest/">Pillow</a></h4>
                  <p></p>
                </div><!-- /.info -->
              </figcaption>

            </figure>
          </div>

          <div class="aitem col-md-4 clo-xs-12">
            <figure class="learn_hover">

              <div class="icon-overlay icn-link">
                <a href="https://yiyibooks.cn/xx/Django_1.11.6/index.html"><img src="/static/image/django.png"
                                                       alt="django logo"></a>
              </div><!-- /.icon-overlay -->

              <figcaption class="bordered no-top-border">
                <div class="info">
                  <h4><a href="https://yiyibooks.cn/xx/Django_1.11.6/index.html">Django</a></h4>
                  <p></p>
                </div><!-- /.info -->
              </figcaption>

            </figure>
          </div>
        </div>

        <div class="row">
          <div class="aitem col-md-4 clo-xs-12">
            <figure class="learn_hover">

              <div class="icon-overlay icn-link">
                <a href="http://www.python-requests.org/en/master/"><img src="/static/image/requests.png"
                                                       alt="requests logo"></a>
              </div><!-- /.icon-overlay -->

              <figcaption class="bordered no-top-border">
                <div class="info">
                  <h4><a href="http://www.python-requests.org/en/master/">Requests</a></h4>
                  <p></p>
                </div><!-- /.info -->
              </figcaption>

            </figure>
          </div>

          <div class="aitem col-md-4 clo-xs-12">
            <figure class="learn_hover">

              <div class="icon-overlay icn-link">
                <a href="http://www.celeryproject.org/"><img src="/static/image/celery.png"
                                                       alt="celery logo"></a>
              </div><!-- /.icon-overlay -->

              <figcaption class="bordered no-top-border">
                <div class="info">
                  <h4><a href="http://www.celeryproject.org/">Celery</a></h4>
                  <p></p>
                </div><!-- /.info -->
              </figcaption>

            </figure>
          </div>

          <div class="aitem col-md-4 clo-xs-12">
            <figure class="learn_hover">

              <div class="icon-overlay icn-link">
                <a href="https://www.django-rest-framework.org/"><img src="/static/image/djangorestframework.png"
                                                       alt="djangorestframework logo"></a>
              </div><!-- /.icon-overlay -->

              <figcaption class="bordered no-top-border">
                <div class="info">
                  <h4><a href="https://www.django-rest-framework.org/">Djangorestframework</a></h4>
                  <p></p>
                </div><!-- /.info -->
              </figcaption>

            </figure>
          </div>
        </div>
    </div>

    <div class="chatContainer">
        <div class="chatBtn">
            <i class="iconfont icon-xiaoxi1"></i>
        </div>
        <div class="chat-message-num">13</div>
        <div class="chatBox" ref="chatBox">
            <div class="chatBox-head">
                <div class="chatBox-head-one">
                    &ensp;&ensp;&ensp;&ensp;&ensp;在线聊天
                    <div class="chat-close" style="margin: 10px 10px 0 0;font-size: 14px">关闭</div>
                </div>
                <div class="chatBox-head-two">
                    <div class="chat-return">返回</div>
                    <div class="chat-people">
                        <div class="ChatInfoHead">
                            <img src="" alt="头像"/>
                        </div>
                        <div class="ChatInfoName"></div>
                    </div>
                    <div class="chat-close">关闭</div>
                </div>
            </div>
            <div id="chatBox-info" class="chatBox-info">
                <div class="chatBox-list" ref="chatBoxlist">
                    <div class="chat-list-people">
                        <div><img src="/static/image/xiaoxin.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>小新</p>
                        </div>
                        <div class="message-num">在线</div>
                        <div class="chat_pic"><img src="/static/image/xiaoxin_pic.png" alt=""></div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/meiya.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>美冴</p>
                        </div>
                        <div class="message-num">离线</div>
                        <div class="chat_pic"><img src="/static/image/meiya_pic.png" alt=""></div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/guangzhi.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>广志</p>
                        </div>
                        <div class="message-num">离线</div>
                        <div class="chat_pic"><img src="/static/image/guangzhi_pic.png" alt=""></div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/xiaokui.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>小葵</p>
                        </div>
                        <div class="message-num">离线</div>
                        <div class="chat_pic"><img src="/static/image/xiaokui_pic.png" alt=""></div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/xiaobai.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>小白</p>
                        </div>
                        <div class="message-num">在线</div>
                        <div class="chat_pic"><img src="/static/image/xiaobai_pic.png" alt=""></div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/fengjian.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>风间</p>
                        </div>
                        <div class="message-num">离线</div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/nini.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>妮妮</p>
                        </div>
                        <div class="message-num">离线</div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/zhengnan.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>正男</p>
                        </div>
                        <div class="message-num">离线</div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/adai.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>阿呆</p>
                        </div>
                        <div class="message-num">离线</div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/dongganchaoren.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>动感超人</p>
                        </div>
                        <div class="message-num">离线</div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/piguxingren.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>屁股星人</p>
                        </div>
                        <div class="message-num">离线</div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/biti.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>天气预报</p>
                        </div>
                        <div class="message-num">在线</div>
                    </div>
                    <div class="chat-list-people">
                        <div><img src="/static/image/xingxing.png" alt="头像"/></div>
                        <div class="chat-name">
                            <p>站长</p>
                        </div>
                        <div class="message-num">离线</div>
                    </div>
                </div>
                <div class="chatBox-kuang" ref="chatBoxkuang">
                    <div class="chatBox-content">
                        <!--小新-->
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <!--小白-->
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                        <div class="chatBox-content-demo"></div>
                    </div>
                    <div class="chatBox-send">
                        <div class="div-textarea" type="text" onkeypress="return noNumbers(event)" contenteditable="true"></div>
                        <div>
                            <button id="chat-biaoqing" title="表情(暂不支持)" class="btn-default-styles">
                                <i class="iconfont icon-biaoqing"></i>
                            </button>
                            <label id="chat-tuxiang" title="发送图片(暂不支持)" class="btn-default-styles">
                                <i class="iconfont icon-tuxiang"></i>
                            </label>
                            <button id="chat-fasong" title="发送" class="btn-default-styles"><i class="iconfont icon-fasong"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block script_extends %}
    <script type="text/javascript">
        // 图表配置
        $("#container").highcharts({
            chart: { type: 'line' },
            title: { text: '前七天博客阅读数据' },
            xAxis: {
                categories: {{ dates|safe }},   // x 轴分类
                tickmarkPlacement: 'on',
                title: '',
            },
            yAxis: {
                title: { text: null },
                labels:{ enabled: false },
                gridLineDashStyle: 'Dash',
            },
            series: [{                              // 数据列
                name: '阅读量',                     // 数据列名
                data: {{ read_nums }}               // 数据
            }],
            plotOptions: {
                line: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            legend: {
                itemStyle: {
                    font: '9pt Trebuchet MS, Verdana, sans-serif',
                    color: 'black'
                },
                itemHoverStyle:{
                    color: 'gray'
                }
            },
            credits: { enabled: false },
        });

        $("#container2").highcharts({
            chart: { type: 'line' },
            title: { text: '近几日的网站访问数据' },
            xAxis: {
                categories: {{ dr|safe }},   // x 轴分类
                tickmarkPlacement: 'on',
                title: '',
            },
            yAxis: {
                title: { text: null },
                labels:{ enabled: false },
                gridLineDashStyle: 'Dash',
            },
            series: [{                              // 数据列
                name: '访问量pv',                     // 数据列名
                data: {{ pv }}               // 数据
            },
            {                              // 数据列
                name: '访客数uv',                     // 数据列名
                data: {{ uv }}               // 数据
            },
            {                              // 数据列
                name: 'ip数',                     // 数据列名
                data: {{ ipc }}               // 数据
            }],
            plotOptions: {
                line: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            legend: {
                itemStyle: {
                    font: '9pt Trebuchet MS, Verdana, sans-serif',
                    color: 'black'
                },
                itemHoverStyle:{
                    color: 'gray'
                }
            },
            credits: { enabled: false },
        });
        // 地图
        var mydata = [
            {name: '北京',value: 0 },{name: '天津',value: 0 },
            {name: '上海',value: 0 },{name: '重庆',value: 0 },
            {name: '河北',value: 0 },{name: '河南',value: 0 },
            {name: '云南',value: 0 },{name: '辽宁',value: 0 },
            {name: '黑龙江',value: 0 },{name: '湖南',value: 0 },
            {name: '安徽',value: 0 },{name: '山东',value: 0 },
            {name: '新疆',value: 0 },{name: '江苏',value: 0 },
            {name: '浙江',value: 0 },{name: '江西',value: 0 },
            {name: '湖北',value: 0 },{name: '广西',value: 0 },
            {name: '甘肃',value: 0 },{name: '山西',value: 0 },
            {name: '内蒙古',value: 0 },{name: '陕西',value: 0 },
            {name: '吉林',value: 0 },{name: '福建',value: 0 },
            {name: '贵州',value: 0 },{name: '广东',value: 0 },
            {name: '青海',value: 0 },{name: '西藏',value: 0 },
            {name: '四川',value: 0 },{name: '宁夏',value: 0 },
            {name: '海南',value: 0 },{name: '台湾',value: 0 },
            {name: '香港',value: 0 },{name: '澳门',value: 0 },
            {name: '南海',value: 0 },
            {% for a in diyu %}
                {name:"{{ a.name }}", value:{{ a.value }}},
            {% endfor %}
        ]
        var optionMap = {
                backgroundColor: '#FFFFFF',
                title: {
                    text: '全国访客人数分布',
                    subtext: '数据来源于百度统计',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: '{b}<br>{c}人访问'
                },

                legend: {
                    orient: 'vertical',
                    left: 'left'
                },
                visualMap: {
                    min: 0,
                    max: {{ diyu_high }},
                    left: 'left',
                    top: 'bottom',
                    text: ['高', '低'],           // 文本，默认为数值文本
                    calculable: true,
                    inRange: {
                        color: ['white','red']
                    }
                },
                //配置属性
                series: [{
                    name: '数据',
                    type: 'map',
                    mapType: 'china',
                    roam: true,
                    label: {
                        normal: {
                            show: false  //省份名称
                        },
                        emphasis: {
                            show: true
                        }
                    },
                    data:mydata  //数据
                }]
            };
        //初始化echarts实例
        var myChart = echarts.init(document.getElementById('uv_map'));

        myChart.setOption(optionMap);

        //翻译
        function ajax_tran(){
            var text_num1 = $("#tran_area")[0].textLength / 35
            var text_num2 = Math.floor(text_num1)
            $(".tran").attr("rows",text_num2+10);
            var input_text = $("#tran_area").val();
            var lan1 = $("#dropdownMenu1").attr("data-lan1");
            var lan2 = $("#dropdownMenu1").attr("data-lan2");
            $.ajaxSetup({
                data:{csrfmiddlewaretoken:'{{ csrf_token }}'},
            });
            $.ajax({
                url: "{% url 'translate' %}",
                type: 'POST',
                data: {"input_text":input_text, "lan1":lan1, "lan2":lan2},
                dataType: 'text',
                cache: false,
                success: function(data){
                    var data = JSON.parse(data)['data']
                    $("#show_tran").text(data);
                }
            });
        }
        $(".lan").click(function(){
            var lan_text = $(this).text();
            var lan1 = $(this).attr("data-lan1");
            var lan2= $(this).attr("data-lan2");
            $("#tran_type_text").text(lan_text);
            $("#dropdownMenu1").attr("data-lan1",lan1);
            $("#dropdownMenu1").attr("data-lan2",lan2);
            ajax_tran();
        });
        tran_time = setTimeout(function(){ return false;}, 0);
        // 延时翻译：用户停止输入600毫秒后翻译
        $("#tran_area").bind('input propertychange',function(){
            clearTimeout(tran_time);
            tran_time = setTimeout(function(){ ajax_tran();}, 600);
        });
        $("#clear_tran").click(function(){
            $("#tran_area").val("");
            ajax_tran();
        });
        screenFuc();
        function screenFuc() {
            var topHeight = $(".chatBox-head").innerHeight();//聊天头部高度
            //屏幕小于768px时候,布局change
            var winWidth = $(window).innerWidth();
            if (winWidth <= 768) {
                var totalHeight = $(window).height(); //页面整体高度
                $(".chatBox-info").css("height", totalHeight - topHeight);
                var infoHeight = $(".chatBox-info").innerHeight();//聊天头部以下高度
                //中间内容高度
                $(".chatBox-content").css("height", infoHeight - 46);
                $(".chatBox-content-demo").css("height", infoHeight - 46);

                $(".chatBox-list").css("height", totalHeight - topHeight);
                $(".chatBox-kuang").css("height", totalHeight - topHeight);
                $(".div-textarea").css("width", winWidth - 106);
            } else {
                $(".chatBox-info").css("height", 455);
                $(".chatBox-content").css("height", 408);
                $(".chatBox-content-demo").css("height", 408);
                $(".chatBox-list").css("height", 455);
                $(".chatBox-kuang").css("height", 455);
                $(".div-textarea").css("width", 260);
            }
        }
        (window.onresize = function () {
            screenFuc();
        })();
        //未读信息数量为空时
        var totalNum = $(".chat-message-num").html();
        if (totalNum == "") {
            $(".chat-message-num").css("padding", 0);
        }
        $(".message-num").each(function () {
            var wdNum = $(this).html();
            if (wdNum == "") {
                $(this).css("padding", 0);
            }
        });


        //打开/关闭聊天框
        $(".chatBtn").click(function () {
            $(".chatBox").slideToggle();
        })
        $(".chat-close").click(function () {
            $(".chatBox").slideToggle();
        })
        // 实时时间函数
        function getNowFormatDate() {
            var date = new Date();
            var seperator1 = "-";
            var seperator2 = ":";
            var month = date.getMonth() + 1;
            var strDate = date.getDate();
            var strSec = date.getSeconds();
            if (month >= 1 && month <= 9) {
                month = "0" + month;
            }
            if (strDate >= 0 && strDate <= 9) {
                strDate = "0" + strDate;
            }
            if (strSec >= 0 && strSec <= 9) {
                strSec = "0" + strSec;
            }
            var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate
                    + " " + date.getHours() + seperator2 + date.getMinutes()
                    + seperator2 + strSec;
            return currentdate;
        }
        // 机器人回复函数
        function myBot(chat_num,reply_message,reply_img){
            $(".chatBox-content-demo").eq(chat_num).append("<div class=\"clearfloat\">" +
                "<div class=\"author-name\"><small class=\"chat-date\">"+getNowFormatDate()+"</small> </div> " +
                "<div class=\"left\"> <div class=\"chat-avatars\"><img src="+reply_img+" alt=\"头像\" /> </div> " +
                "<div class=\"chat-message\">"+reply_message+"</div> </div> </div>");
            $(document).ready(function () {
                $(".chatBox-content-demo").eq(chat_num).scrollTop($(".chatBox-content-demo").eq(chat_num)[0].scrollHeight);
            });
        }
        //进聊天页面
        var chat_num = 100;
        $(".chat-list-people").each(function () {
            $(this).click(function () {
                chat_num = $(this).index();
                chat_str = ".chatBox-content-demo:eq("+chat_num+")"
                $(".chatBox-head-one").toggle();
                $(".chatBox-head-two").toggle();
                $(".chatBox-list").fadeToggle();
                $(".chatBox-kuang").fadeToggle();
                $(chat_str).show();
                $(chat_str).siblings().hide();
                //传名字
                var ChatInfoName = $(this).children(".chat-name").children("p").eq(0).html();
                $(".ChatInfoName").text(ChatInfoName);
                var reply_img = $(this).children().eq(0).children("img").attr("src")
                //传头像
                $(".ChatInfoHead>img").attr("src", reply_img);
                var auto_mes = "你好，我是小新的同学"+ChatInfoName+"，目前不在线"
                if($(".chatBox-content-demo").eq(chat_num).children('div').length==0){
                    if(chat_num==0){
                        setTimeout(function(){myBot(chat_num,"你好，我叫野原新之助，今年五岁，在埼玉县春日市的双叶幼稚园上小班，我最喜欢吃巧克力饼干，最讨厌吃青椒和胡萝卜，最喜欢看动感超人。现在就可以和我聊天",reply_img)},1000);
                    }
                    if(chat_num==1){
                        setTimeout(function(){myBot(chat_num,"你好，我是小新妈妈，因为每天要处理家务还要照顾小葵，当然还有调皮的小新，所以无法及时回复您非常抱歉，可以的话留言给我，我会尽快回复",reply_img)},1000);
                    }
                    if(chat_num==2){
                        setTimeout(function(){myBot(chat_num,"你好，我是小新爸爸，因为要还32年的房贷，所以白天上班晚上还要陪客户吃饭，若没有及时回复您还请见谅",reply_img)},1000);
                    }
                    if(chat_num==4){
                        setTimeout(function(){myBot(chat_num,"汪汪",reply_img)},1000);
                    }
                    if(chat_num>4&&chat_num<9){
                        setTimeout(function(){myBot(chat_num,auto_mes,reply_img)},1000);
                    }
                    if(chat_num==11){

                        setTimeout(function(){myBot(chat_num,"{{ tianqi | safe}}",reply_img)},1000);
                    }
                    if(chat_num==12){
                        setTimeout(function(){myBot(chat_num,"你好，我是站长。<br/>QQ:736209298<br/>邮箱:736209298@qq.com<br/>微信:hujie770183<br/>Line ID:hujie6<br/>租的国外服务器，速度方面还请见谅",reply_img)},1000);
                    }
                }
            })
        });
        //返回列表
        $(".chat-return").click(function () {
            $(".chatBox-head-one").toggle(1);
            $(".chatBox-head-two").toggle(1);
            $(".chatBox-list").fadeToggle(1);
            $(".chatBox-kuang").fadeToggle(1);
        });

        //      发送信息
        $("#chat-fasong").click(function () {
            var textContent = $(".div-textarea").html().replace(/[\n\r]/g, '<br>')
            if (textContent != "") {
                $(".chatBox-content-demo").eq(chat_num).append("<div class=\"clearfloat\">" +
                    "<div class=\"author-name\"><small class=\"chat-date\">"+getNowFormatDate()+"</small> </div> " +
                    "<div class=\"right\"> <div class=\"chat-message\"> " + textContent + " </div> " +
                    "<div class=\"chat-avatars\"><img src=\"/static/image/bulibuli.png\" alt=\"头像\" /></div> </div> </div>");
                //发送后清空输入框
                $(".div-textarea").html("");
                //聊天框默认最底部
                $(document).ready(function () {
                    $(".chatBox-content-demo").eq(chat_num).scrollTop($(".chatBox-content-demo").eq(chat_num)[0].scrollHeight);
                });
                if(chat_num==0){
                    if(textContent.length>50){
                        myBot(chat_num,"能说短一点吗，我才5岁，听不懂耶","/static/image/xiaoxin.png")
                    }else{
                        // 机器人接受消息并回复
                        $.ajaxSetup({
                            data:{csrfmiddlewaretoken:'{{ csrf_token }}'},
                        });
                        $.ajax({
                            url: "{% url 'xiaoxin' %}",
                            type: 'POST',
                            data: {"xiao_text":textContent},
                            dataType: 'text',
                            cache: false,
                            success: function(data){
                                var data = JSON.parse(data)['data']
                                if(data==""){
                                    myBot(chat_num,"你说什么我听不懂","/static/image/xiaoxin.png")
                                    return false;
                                }
                                myBot(chat_num,data,"/static/image/xiaoxin.png")
                            }
                        });
                    }
                }else if(chat_num==4){
                    var wang_wang = "汪汪汪汪汪汪汪汪汪汪汪汪汪汪汪汪"
                    var wang_num = Math.floor(Math.random()*10) + 1;
                    setTimeout(function(){
                        myBot(chat_num,wang_wang.slice(0,wang_num),"/static/image/xiaobai.png")
                    },1000);
                }
            }
        });
        // 回车发送
        function noNumbers(e){
            var keynum
            if(window.event) // IE
                {
                keynum = e.keyCode
                }
            else if(e.which) // Netscape/Firefox/Opera
                {
                keynum = e.which
                }
            if(keynum==13){
                $("#chat-fasong").click();
                return false;
            }
        }
    </script>
{% endblock %}